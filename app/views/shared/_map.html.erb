
<div class="floor-plan-container">
  <div class="floor-plan-frame">
    <div class="floor-plan">
      <div class="inside">

        <!-- ATTIC FLOOR -->
        <div class="floor-level">
          <div class="level-label">1st Floor</div>
          <div class="attic-floor">
            <% room = rooms.find_by(name: "Attic")%>
            <%= link_to room.name, room_path(room), class: "room attic-room", data: { turbo_frame: "_top" } %>
          </div>
        </div>

        <!-- GROUND FLOOR -->
        <div class="floor-level">
          <div class="level-label">Ground Floor</div>
          <div class="ground-floor">
            <% hall = rooms.find_by(name: "Hall")%>
            <%= link_to hall.name, room_path(hall), class: "room hall", data: { turbo_frame: "_top" } %>

            <% library = rooms.find_by(name: "Library")%>
            <%= link_to library.name, room_path(library), class: "room library", data: { turbo_frame: "_top" } %>

            <% kitchen = rooms.find_by(name: "Kitchen")%>
            <%= link_to kitchen.name, room_path(kitchen), class: "room kitchen", data: { turbo_frame: "_top" } %>

            <% study = rooms.find_by(name: "Study")%>
            <%= link_to study.name, room_path(study), class: "room study", data: { turbo_frame: "_top" } %>
          </div>
        </div>

      </div>
      <div class="outside">
        <!-- CELLAR FLOOR -->
        <div class="floor-level">
          <div class="level-label">Basement</div>
          <div class="cellar-floor">
            <% cellar = rooms.find_by(name: "Cellar")%>
            <% if cellar.open %>
              <%= link_to room_path(cellar), class: "room cellar-room", data: { turbo_frame: "_top" } do %>
                <%= cellar.name %><span class="room-lock unlocked"><i class="fa-solid fa-door-open" style="color: #FFD43B;"></i></span>
              <% end %>
            <% else %>
              <div class="room cellar-room closed"><%= cellar.name %><span class="room-lock locked">üîí</span></div>
            <% end %>
          </div>
        </div>

        <!-- EXTERIOR / GREENHOUSE -->
        <div class="floor-level exterior-level">
          <div class="level-label">Exterior</div>
          <div class="exterior-floor">
            <% greenhouse = rooms.find_by(name: "Greenhouse")%>
            <% if greenhouse.open %>
              <%= link_to room_path(greenhouse), class: "room greenhouse-room", data: { turbo_frame: "_top" } do %>
                <%= greenhouse.name %><span class="room-lock unlocked"><i class="fa-solid fa-door-open" style="color: #FFD43B;"></i></span>
              <% end %>
            <% else %>
              <div class="room greenhouse-room closed"><%= greenhouse.name %><span class="room-lock locked">üîí</span></div>
            <% end %>
          </div>

        </div>
      </div>
    </div>
  </div>

  <div class="room-preview">
    <button type="button" class="eye-btn" data-bs-toggle="modal" data-bs-target="#roomImageModal">üëÅÔ∏è</button>
    <%= turbo_frame_tag "room_image" do %>
      <% if @room.item_found %>
        <img src="<%= @room.after_picture_url %>" alt="<%= @room.name %>">
      <% else %>
        <img src="<%= @room.before_picture_url %>" alt="<%= @room.name %>">
      <% end %>
    <% end %>
  </div>
</div>

<!-- Modal Image Fullscreen -->
<div class="modal fade" id="roomImageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content room-modal-content">
      <button type="button" class="btn-close btn-close-white room-modal-close" data-bs-dismiss="modal" aria-label="Close"></button>
      <div class="modal-body p-0">
        <% if @room.item_found %>
          <img src="<%= @room.after_picture_url %>" alt="<%= @room.name %>" class="room-modal-img">
        <% else %>
          <img src="<%= @room.before_picture_url %>" alt="<%= @room.name %>" class="room-modal-img">
        <% end %>
      </div>
    </div>
  </div>
</div>
