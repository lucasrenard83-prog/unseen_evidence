// delaunay-find/lib/index.js@0.0.6 downloaded from https://ga.jspm.io/npm:delaunay-find@0.0.6/lib/index.js

import*as r from"delaunator/delaunator.js";var t="default"in r?r.default:r;var e={};e.__esModule=true;e.default=void 0;var n=_interopRequireDefault(t);function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function pointX(r){return r[0]}function pointY(r){return r[1]}function collinear(r){var t=r.triangles,e=r.coords;for(var n=0;n<t.length;n+=3){var a=2*t[n];var i=2*t[n+1];var l=2*t[n+2];var h=(e[l]-e[a])*(e[i+1]-e[a+1])-(e[i]-e[a])*(e[l+1]-e[a+1]);if(h>1e-10)return false}return true}function jitter(r,t,e){return[r+Math.sin(r+t)*e,t+Math.cos(r-t)*e]}function flatArray(r,t,e,n){var a=r.length;var i=new Float64Array(2*a);for(var l=0;l<a;++l){var h=r[l];i[2*l]=t.call(n,h,l,r);i[2*l+1]=e.call(n,h,l,r)}return i}var a=function(){function Delaunay(r){var t=new n.default(r);this.inedges=new Int32Array(r.length/2);this._hullIndex=new Int32Array(r.length/2);this.points=t.coords;this._init(t)}var r=Delaunay.prototype;r._init=function _init(r){var t=r;var e=this.points;if(t.hull&&t.hull.length>2&&collinear(t)){this.collinear=Int32Array.from({length:e.length/2},(function(r,t){return t})).sort((function(r,t){return e[2*r]-e[2*t]||e[2*r+1]-e[2*t+1]}));var a=this.collinear[0];var i=this.collinear[this.collinear.length-1];var l=[e[2*a],e[2*a+1],e[2*i],e[2*i+1]];var h=1e-8*Math.sqrt(Math.pow(l[3]-l[1],2)+Math.pow(l[2]-l[0],2));for(var o=0,s=e.length/2;o<s;++o){var u=jitter(e[2*o],e[2*o+1],h);e[2*o]=u[0];e[2*o+1]=u[1]}r=new n.default(e)}var f=this.halfedges=r.halfedges;var v=this.hull=r.hull;var g=this.triangles=r.triangles;var d=this.inedges.fill(-1);var c=this._hullIndex.fill(-1);for(var p=0,_=f.length;p<_;++p){var w=g[p%3===2?p-2:p+1];-1!==f[p]&&-1!==d[w]||(d[w]=p)}for(var y=0,M=v.length;y<M;++y)c[v[y]]=y;if(v.length<=2&&v.length>0){this.triangles=new Int32Array(3).fill(-1);this.halfedges=new Int32Array(3).fill(-1);this.triangles[0]=v[0];this.triangles[1]=v[1];this.triangles[2]=v[1];d[v[0]]=1;2===v.length&&(d[v[1]]=0)}};r.neighbors=function neighbors(r){var t=[];var e=this.inedges,n=this.hull,a=this._hullIndex,i=this.halfedges,l=this.triangles;var h=e[r];if(-1===h)return t;var o=h;var s=-1;do{s=l[o];t.push(s);o=o%3===2?o-2:o+1;if(l[o]!==r)break;o=i[o];if(-1===o){var u=n[(a[r]+1)%n.length];u!==s&&t.push(u);break}}while(o!==h);return t};r.find=function find(r,t,e){void 0===e&&(e=0);if((r=+r,r!==r)||(t=+t,t!==t))return-1;var n=e;var a;while((a=this._step(e,r,t))>=0&&a!==e&&a!==n)e=a;return a};r._step=function _step(r,t,e){var n=this.inedges,a=this.points;if(-1===n[r]||!a.length)return(r+1)%(a.length>>1);var i=r;var l=Math.pow(t-a[2*r],2)+Math.pow(e-a[2*r+1],2);var h=this.neighbors(r),o=Array.isArray(h),s=0;for(h=o?h:h[Symbol.iterator]();;){var u;if(o){if(s>=h.length)break;u=h[s++]}else{s=h.next();if(s.done)break;u=s.value}var f=u;var v=Math.pow(t-a[2*f],2)+Math.pow(e-a[2*f+1],2);if(v<l){l=v;i=f}}return i};return Delaunay}();e.default=a;a.from=function(r,t,e,n){void 0===t&&(t=pointX);void 0===e&&(e=pointY);return new a(flatArray(r,t,e,n))};const i=e.__esModule;export default e;export{i as __esModule};

