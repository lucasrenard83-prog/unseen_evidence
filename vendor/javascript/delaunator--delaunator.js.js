// delaunator/delaunator.js@4.0.1 downloaded from https://ga.jspm.io/npm:delaunator@4.0.1/delaunator.js

var r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var i={};(function(r,a){i=a()})(i,(function(){var i=Math.pow(2,-52);var a=new Uint32Array(512);var t=function Delaunator(i){var a=i.length>>1;if(a>0&&"number"!==typeof i[0])throw new Error("Expected coords to contain numbers.");(this||r).coords=i;var t=Math.max(2*a-5,0);(this||r)._triangles=new Uint32Array(3*t);(this||r)._halfedges=new Int32Array(3*t);(this||r)._hashSize=Math.ceil(Math.sqrt(a));(this||r)._hullPrev=new Uint32Array(a);(this||r)._hullNext=new Uint32Array(a);(this||r)._hullTri=new Uint32Array(a);(this||r)._hullHash=new Int32Array((this||r)._hashSize).fill(-1);(this||r)._ids=new Uint32Array(a);(this||r)._dists=new Float64Array(a);this.update()};t.from=function from(r,i,a){void 0===i&&(i=defaultGetX);void 0===a&&(a=defaultGetY);var e=r.length;var s=new Float64Array(2*e);for(var h=0;h<e;h++){var n=r[h];s[2*h]=i(n);s[2*h+1]=a(n)}return new t(s)};t.prototype.update=function update(){var a=this||r;var t=a.coords;var e=a._hullPrev;var s=a._hullNext;var h=a._hullTri;var n=a._hullHash;var v=t.length>>1;var l=Infinity;var o=Infinity;var f=-Infinity;var u=-Infinity;for(var _=0;_<v;_++){var d=t[2*_];var c=t[2*_+1];d<l&&(l=d);c<o&&(o=c);d>f&&(f=d);c>u&&(u=c);(this||r)._ids[_]=_}var y=(l+f)/2;var g=(o+u)/2;var w=Infinity;var p,k,b;for(var A=0;A<v;A++){var I=dist(y,g,t[2*A],t[2*A+1]);if(I<w){p=A;w=I}}var S=t[2*p];var T=t[2*p+1];w=Infinity;for(var z=0;z<v;z++)if(z!==p){var M=dist(S,T,t[2*z],t[2*z+1]);if(M<w&&M>0){k=z;w=M}}var x=t[2*k];var U=t[2*k+1];var m=Infinity;for(var q=0;q<v;q++)if(q!==p&&q!==k){var K=circumradius(S,T,x,U,t[2*q],t[2*q+1]);if(K<m){b=q;m=K}}var L=t[2*b];var G=t[2*b+1];if(Infinity!==m){if(orient(S,T,x,U,L,G)){var P=k;var C=x;var E=U;k=b;x=L;U=G;b=P;L=C;G=E}var F=circumcenter(S,T,x,U,L,G);(this||r)._cx=F.x;(this||r)._cy=F.y;for(var H=0;H<v;H++)(this||r)._dists[H]=dist(t[2*H],t[2*H+1],F.x,F.y);quicksort((this||r)._ids,(this||r)._dists,0,v-1);(this||r)._hullStart=p;var N=3;s[p]=e[b]=k;s[k]=e[p]=b;s[b]=e[k]=p;h[p]=0;h[k]=1;h[b]=2;n.fill(-1);n[this._hashKey(S,T)]=p;n[this._hashKey(x,U)]=k;n[this._hashKey(L,G)]=b;(this||r).trianglesLen=0;this._addTriangle(p,k,b,-1,-1,-1);for(var X=0,Y=void 0,D=void 0;X<(this||r)._ids.length;X++){var j=(this||r)._ids[X];var B=t[2*j];var J=t[2*j+1];if(!(X>0&&Math.abs(B-Y)<=i&&Math.abs(J-D)<=i)){Y=B;D=J;if(j!==p&&j!==k&&j!==b){var O=0;for(var Q=0,R=this._hashKey(B,J);Q<(this||r)._hashSize;Q++){O=n[(R+Q)%(this||r)._hashSize];if(-1!==O&&O!==s[O])break}O=e[O];var V=O,W=void 0;while(W=s[V],!orient(B,J,t[2*V],t[2*V+1],t[2*W],t[2*W+1])){V=W;if(V===O){V=-1;break}}if(-1!==V){var Z=this._addTriangle(V,j,s[V],-1,-1,h[V]);h[j]=this._legalize(Z+2);h[V]=Z;N++;var $=s[V];while(W=s[$],orient(B,J,t[2*$],t[2*$+1],t[2*W],t[2*W+1])){Z=this._addTriangle($,j,W,h[j],-1,h[$]);h[j]=this._legalize(Z+2);s[$]=$;N--;$=W}if(V===O)while(W=e[V],orient(B,J,t[2*W],t[2*W+1],t[2*V],t[2*V+1])){Z=this._addTriangle(W,j,V,-1,h[V],h[W]);this._legalize(Z+2);h[W]=Z;s[V]=V;N--;V=W}(this||r)._hullStart=e[j]=V;s[V]=e[$]=j;s[j]=$;n[this._hashKey(B,J)]=j;n[this._hashKey(t[2*V],t[2*V+1])]=V}}}}(this||r).hull=new Uint32Array(N);for(var rr=0,ir=(this||r)._hullStart;rr<N;rr++){(this||r).hull[rr]=ir;ir=s[ir]}(this||r).triangles=(this||r)._triangles.subarray(0,(this||r).trianglesLen);(this||r).halfedges=(this||r)._halfedges.subarray(0,(this||r).trianglesLen)}else{for(var ar=0;ar<v;ar++)(this||r)._dists[ar]=t[2*ar]-t[0]||t[2*ar+1]-t[1];quicksort((this||r)._ids,(this||r)._dists,0,v-1);var tr=new Uint32Array(v);var er=0;for(var sr=0,hr=-Infinity;sr<v;sr++){var nr=(this||r)._ids[sr];if((this||r)._dists[nr]>hr){tr[er++]=nr;hr=(this||r)._dists[nr]}}(this||r).hull=tr.subarray(0,er);(this||r).triangles=new Uint32Array(0);(this||r).halfedges=new Uint32Array(0)}};t.prototype._hashKey=function _hashKey(i,a){return Math.floor(pseudoAngle(i-(this||r)._cx,a-(this||r)._cy)*(this||r)._hashSize)%(this||r)._hashSize};t.prototype._legalize=function _legalize(i){var t=this||r;var e=t._triangles;var s=t._halfedges;var h=t.coords;var n=0;var v=0;while(true){var l=s[i];var o=i-i%3;v=o+(i+2)%3;if(-1!==l){var f=l-l%3;var u=o+(i+1)%3;var _=f+(l+2)%3;var d=e[v];var c=e[i];var y=e[u];var g=e[_];var w=inCircle(h[2*d],h[2*d+1],h[2*c],h[2*c+1],h[2*y],h[2*y+1],h[2*g],h[2*g+1]);if(w){e[i]=g;e[l]=d;var p=s[_];if(-1===p){var k=(this||r)._hullStart;do{if((this||r)._hullTri[k]===_){(this||r)._hullTri[k]=i;break}k=(this||r)._hullPrev[k]}while(k!==(this||r)._hullStart)}this._link(i,p);this._link(l,s[v]);this._link(v,_);var b=f+(l+1)%3;n<a.length&&(a[n++]=b)}else{if(0===n)break;i=a[--n]}}else{if(0===n)break;i=a[--n]}}return v};t.prototype._link=function _link(i,a){(this||r)._halfedges[i]=a;-1!==a&&((this||r)._halfedges[a]=i)};t.prototype._addTriangle=function _addTriangle(i,a,t,e,s,h){var n=(this||r).trianglesLen;(this||r)._triangles[n]=i;(this||r)._triangles[n+1]=a;(this||r)._triangles[n+2]=t;this._link(n,e);this._link(n+1,s);this._link(n+2,h);(this||r).trianglesLen+=3;return n};function pseudoAngle(r,i){var a=r/(Math.abs(r)+Math.abs(i));return(i>0?3-a:1+a)/4}function dist(r,i,a,t){var e=r-a;var s=i-t;return e*e+s*s}function orientIfSure(r,i,a,t,e,s){var h=(t-i)*(e-r);var n=(a-r)*(s-i);return Math.abs(h-n)>=33306690738754716e-32*Math.abs(h+n)?h-n:0}function orient(r,i,a,t,e,s){var h=orientIfSure(e,s,r,i,a,t)||orientIfSure(r,i,a,t,e,s)||orientIfSure(a,t,e,s,r,i);return h<0}function inCircle(r,i,a,t,e,s,h,n){var v=r-h;var l=i-n;var o=a-h;var f=t-n;var u=e-h;var _=s-n;var d=v*v+l*l;var c=o*o+f*f;var y=u*u+_*_;return v*(f*y-c*_)-l*(o*y-c*u)+d*(o*_-f*u)<0}function circumradius(r,i,a,t,e,s){var h=a-r;var n=t-i;var v=e-r;var l=s-i;var o=h*h+n*n;var f=v*v+l*l;var u=.5/(h*l-n*v);var _=(l*o-n*f)*u;var d=(h*f-v*o)*u;return _*_+d*d}function circumcenter(r,i,a,t,e,s){var h=a-r;var n=t-i;var v=e-r;var l=s-i;var o=h*h+n*n;var f=v*v+l*l;var u=.5/(h*l-n*v);var _=r+(l*o-n*f)*u;var d=i+(h*f-v*o)*u;return{x:_,y:d}}function quicksort(r,i,a,t){if(t-a<=20)for(var e=a+1;e<=t;e++){var s=r[e];var h=i[s];var n=e-1;while(n>=a&&i[r[n]]>h)r[n+1]=r[n--];r[n+1]=s}else{var v=a+t>>1;var l=a+1;var o=t;swap(r,v,l);i[r[a]]>i[r[t]]&&swap(r,a,t);i[r[l]]>i[r[t]]&&swap(r,l,t);i[r[a]]>i[r[l]]&&swap(r,a,l);var f=r[l];var u=i[f];while(true){do{l++}while(i[r[l]]<u);do{o--}while(i[r[o]]>u);if(o<l)break;swap(r,l,o)}r[a+1]=r[o];r[o]=f;if(t-l+1>=o-a){quicksort(r,i,l,t);quicksort(r,i,a,o-1)}else{quicksort(r,i,a,o-1);quicksort(r,i,l,t)}}}function swap(r,i,a){var t=r[i];r[i]=r[a];r[a]=t}function defaultGetX(r){return r[0]}function defaultGetY(r){return r[1]}return t}));var a=i;export default a;

